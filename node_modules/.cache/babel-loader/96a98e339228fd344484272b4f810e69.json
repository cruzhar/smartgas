{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\smartgas\\\\app\\\\src\\\\components\\\\Catalogos\\\\Pilotos\\\\index.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { fetchGet, fetchDelete } from \"../../../utils/Fetch\";\nimport { Link, Redirect } from \"react-router-dom\";\nconst estadoInicial = {\n  BuscarDatos: \"\",\n  data: null,\n  estado: \"Re Activar\"\n};\n\nclass Pilotos extends Component {\n  constructor(props) {\n    super(props);\n\n    this.Buscar = async () => {\n      const data = await fetchGet(`${process.env.REACT_APP_SERVER}/api/piloto`);\n      this.setState({\n        dataFiltrada: data.data,\n        data: data.data,\n        estado: \"Re Activar\"\n      });\n    };\n\n    this.BuscarDatos = e => {\n      e.preventDefault();\n      const patt = new RegExp(`${this.state.BuscarDatos}`, \"gi\");\n      const datos = this.state.data.filter(dat => patt.exec(dat.NOMBRE_PILOTO));\n      this.setState({\n        dataFiltrada: datos\n      });\n    };\n\n    this.Eliminar = async ID_PILOTO => {\n      const data = await fetchDelete(`${process.env.REACT_APP_SERVER}/api/piloto/${ID_PILOTO}/${false}`);\n      alert(data.message);\n      const dataGet = await fetchGet(`${process.env.REACT_APP_SERVER}/api/piloto`);\n      this.setState({\n        dataFiltrada: dataGet.data,\n        data: dataGet.data\n      });\n    };\n\n    this.ActivoReactivo = e => {\n      e.preventDefault();\n      console.log(this.state.estado, \"Re Activar\");\n\n      if (this.state.estado === \"Re Activar\") {\n        this.Inactivos();\n      } else {\n        this.Buscar();\n      }\n    };\n\n    this.Reactivar = async ID_PILOTO => {\n      const data = await fetchDelete(`${process.env.REACT_APP_SERVER}/api/piloto/${ID_PILOTO}/${true}`);\n      alert(data.message);\n      this.Inactivos();\n    };\n\n    this.Inactivos = async () => {\n      const data = await fetchGet(`${process.env.REACT_APP_SERVER}/api/piloto/inactivo`);\n      this.setState({\n        dataFiltrada: data.data,\n        data: data.data,\n        estado: \"Activos\"\n      });\n    };\n\n    this.cambioEstado = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.state = {\n      data: estadoInicial\n    };\n  }\n\n  componentDidMount() {\n    this.Buscar();\n  } // cambioEstado = async (e) => {\n  //  const data = await fetchGet(`${process.env.REACT_APP_SERVER}/api/piloto`);\n  //   this.setState({ dataFiltrada: data.data, data: data.data });\n  //   const { name, value } = e.target;\n  //   this.setState({\n  //     [name]: value,\n  //   });\n  // };\n\n\n  render() {\n    const redireccion = this.props.Access(\"VerAccesos\") ? \"\" : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    });\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, redireccion, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"text-center mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, \"Pilotos\"), /*#__PURE__*/React.createElement(\"form\", {\n      class: \"form-inline \",\n      onSubmit: this.BuscarDatos,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"ml-5 mr-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, \"Nombre/Clte:\")), /*#__PURE__*/React.createElement(\"input\", {\n      class: \"form-control mr-sm-5\",\n      type: \"search\",\n      name: \"BuscarDatos\",\n      onChange: this.cambioEstado,\n      defaultValue: this.state.BuscarDatos,\n      placeholder: \"\",\n      \"aria-label\": \"Search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"btn btn-outline-dark my-2 my-sm-0\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, \"Buscar\")), this.props.Access(\"GuardarAccesos\") && /*#__PURE__*/React.createElement(Link, {\n      to: `${process.env.PUBLIC_URL}/pilotos/crear`,\n      className: \"btn btn-link  ml-5 mr-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }, \"Crear\"), this.props.Access(\"GuardarAccesos\") && /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.ActivoReactivo,\n      className: \"btn btn-link  float-right  ml-5 mr-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, this.state.estado), this.state.dataFiltrada && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ml-5 mr-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row border\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, \"Pilotos\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2    d-none      d-sm-none d-md-block d-lg-blocK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, \"TELEFONO\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 d-none   d-sm-none d-md-block d-lg-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }\n    }, \"DNI\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 d-none  d-sm-none d-md-block d-lg-blocK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, \"TIPO LICENCIA\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2 d-none  d-sm-none d-md-block d-lg-blocK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 15\n      }\n    }, \"EMPRESA\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, \"Opciones\")), this.state.dataFiltrada.map(item => {\n      const {\n        ID_PILOTO\n      } = item;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row border\",\n        key: ID_PILOTO,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 19\n        }\n      }, item.NOMBRE_PILOTO), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 19\n        }\n      }, item.TELEFONO_PILOTO), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-2  d-none d-sm-none d-md-block d-lg-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 19\n        }\n      }, item.DNI_PILOTO), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-2 d-none d-sm-none d-md-block d-lg-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 19\n        }\n      }, item.TIPO_LICENCIA), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-2  d-none d-sm-none d-md-block d-lg-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 19\n        }\n      }, item.ID_EMPRESA), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 19\n        }\n      }, this.props.Access(\"EditarAccesos\") && item.ESTADO && /*#__PURE__*/React.createElement(Link, {\n        to: `${process.env.PUBLIC_URL}/pilotos/modificar/${item.ID_PILOTO}`,\n        className: \"btn btn-warning m-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 23\n        }\n      }, \"Modificar\"), this.props.Access(\"EditarAccesos\") && item.ESTADO && /*#__PURE__*/React.createElement(Link, {\n        to: `${process.env.PUBLIC_URL}/pilotos/detalle/${item.ID_PILOTO}`,\n        className: \"btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 23\n        }\n      }, \"Detalles\"), this.props.Access(\"EliminarAccesos\") && item.ESTADO && /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => {\n          if (window.confirm(\"Seguro que deseas el piloto\")) {\n            this.Eliminar(item.ID_PILOTO);\n          }\n        },\n        type: \"button\",\n        className: \"btn btn-danger m-1 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 23\n        }\n      }, \"\\xD7 Eliminar\"), this.props.Access(\"EliminarAccesos\") && !item.ESTADO && /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => {\n          if (window.confirm(\"Seguro que deseas el piloto\")) {\n            this.Reactivar(item.ID_PILOTO);\n          }\n        },\n        type: \"button\",\n        className: \"btn btn-danger m-1 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 23\n        }\n      }, \"\\xD7 Activar\")));\n    })));\n  }\n\n}\n\nexport default Pilotos;","map":{"version":3,"sources":["C:/xampp/htdocs/smartgas/app/src/components/Catalogos/Pilotos/index.js"],"names":["React","Component","Fragment","fetchGet","fetchDelete","Link","Redirect","estadoInicial","BuscarDatos","data","estado","Pilotos","constructor","props","Buscar","process","env","REACT_APP_SERVER","setState","dataFiltrada","e","preventDefault","patt","RegExp","state","datos","filter","dat","exec","NOMBRE_PILOTO","Eliminar","ID_PILOTO","alert","message","dataGet","ActivoReactivo","console","log","Inactivos","Reactivar","cambioEstado","name","value","target","componentDidMount","render","redireccion","Access","PUBLIC_URL","map","item","TELEFONO_PILOTO","DNI_PILOTO","TIPO_LICENCIA","ID_EMPRESA","ESTADO","window","confirm"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,sBAAtC;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AAEA,MAAMC,aAAa,GAAG;AAAEC,EAAAA,WAAW,EAAE,EAAf;AAAmBC,EAAAA,IAAI,EAAE,IAAzB;AAA8BC,EAAAA,MAAM,EAAC;AAArC,CAAtB;;AAEA,MAAMC,OAAN,SAAsBV,SAAtB,CAAgC;AAC9BW,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAKnBC,MALmB,GAKV,YAAW;AAClB,YAAML,IAAI,GAAG,MAAMN,QAAQ,CAAE,GAAEY,OAAO,CAACC,GAAR,CAAYC,gBAAiB,aAAjC,CAA3B;AACA,WAAKC,QAAL,CAAc;AAAEC,QAAAA,YAAY,EAAEV,IAAI,CAACA,IAArB;AAA2BA,QAAAA,IAAI,EAAEA,IAAI,CAACA,IAAtC;AAA2CC,QAAAA,MAAM,EAAC;AAAlD,OAAd;AACD,KARkB;;AAAA,SAsBnBF,WAtBmB,GAsBJY,CAAD,IAAO;AACnBA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAMC,IAAI,GAAG,IAAIC,MAAJ,CAAY,GAAE,KAAKC,KAAL,CAAWhB,WAAY,EAArC,EAAwC,IAAxC,CAAb;AACA,YAAMiB,KAAK,GAAG,KAAKD,KAAL,CAAWf,IAAX,CAAgBiB,MAAhB,CAAwBC,GAAD,IAASL,IAAI,CAACM,IAAL,CAAUD,GAAG,CAACE,aAAd,CAAhC,CAAd;AAEA,WAAKX,QAAL,CAAc;AACZC,QAAAA,YAAY,EAAEM;AADF,OAAd;AAGD,KA9BkB;;AAAA,SAgCnBK,QAhCmB,GAgCR,MAAOC,SAAP,IAAqB;AAC9B,YAAMtB,IAAI,GAAG,MAAML,WAAW,CAC3B,GAAEW,OAAO,CAACC,GAAR,CAAYC,gBAAiB,eAAcc,SAAU,IAAG,KAAM,EADrC,CAA9B;AAGAC,MAAAA,KAAK,CAACvB,IAAI,CAACwB,OAAN,CAAL;AACA,YAAMC,OAAO,GAAG,MAAM/B,QAAQ,CAC3B,GAAEY,OAAO,CAACC,GAAR,CAAYC,gBAAiB,aADJ,CAA9B;AAGA,WAAKC,QAAL,CAAc;AAAEC,QAAAA,YAAY,EAAEe,OAAO,CAACzB,IAAxB;AAA8BA,QAAAA,IAAI,EAAEyB,OAAO,CAACzB;AAA5C,OAAd;AACD,KAzCkB;;AAAA,SA4CnB0B,cA5CmB,GA4CAf,CAAD,IAAO;AACvBA,MAAAA,CAAC,CAACC,cAAF;AACAe,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKb,KAAL,CAAWd,MAAvB,EAA8B,YAA9B;;AACF,UAAG,KAAKc,KAAL,CAAWd,MAAX,KAAoB,YAAvB,EACF;AACA,aAAK4B,SAAL;AACC,OAHC,MAIE;AACF,aAAKxB,MAAL;AACD;AACE,KAtDkB;;AAAA,SAyDnByB,SAzDmB,GAyDP,MAAOR,SAAP,IAAqB;AAC/B,YAAMtB,IAAI,GAAG,MAAML,WAAW,CAC3B,GAAEW,OAAO,CAACC,GAAR,CAAYC,gBAAiB,eAAcc,SAAU,IAAG,IAAK,EADpC,CAA9B;AAGAC,MAAAA,KAAK,CAACvB,IAAI,CAACwB,OAAN,CAAL;AACD,WAAKK,SAAL;AACA,KA/DkB;;AAAA,SAiEnBA,SAjEmB,GAiEP,YAAY;AACxB,YAAM7B,IAAI,GAAG,MAAMN,QAAQ,CAAE,GAAEY,OAAO,CAACC,GAAR,CAAYC,gBAAiB,sBAAjC,CAA3B;AACA,WAAKC,QAAL,CAAc;AAAEC,QAAAA,YAAY,EAAEV,IAAI,CAACA,IAArB;AAA2BA,QAAAA,IAAI,EAAEA,IAAI,CAACA,IAAtC;AAA2CC,QAAAA,MAAM,EAAC;AAAlD,OAAd;AACD,KApEoB;;AAAA,SAsErB8B,YAtEqB,GAsELpB,CAAD,IAAO;AACpB,YAAM;AAAEqB,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAkBtB,CAAC,CAACuB,MAA1B;AACA,WAAKzB,QAAL,CAAc;AACZ,SAACuB,IAAD,GAAQC;AADI,OAAd;AAGD,KA3EoB;;AAEjB,SAAKlB,KAAL,GAAa;AAAEf,MAAAA,IAAI,EAAEF;AAAR,KAAb;AACD;;AAOAqC,EAAAA,iBAAiB,GAAG;AACpB,SAAK9B,MAAL;AACA,GAb6B,CAc9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAwDA+B,EAAAA,MAAM,GAAG;AACP,UAAMC,WAAW,GAAG,KAAKjC,KAAL,CAAWkC,MAAX,CAAkB,YAAlB,IAClB,EADkB,gBAGlB,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF;AAMA,wBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGD,WADH,eAEE;AAAI,MAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,eAGE;AAAM,MAAA,KAAK,EAAC,cAAZ;AAA2B,MAAA,QAAQ,EAAE,KAAKtC,WAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CADF,eAIE;AACE,MAAA,KAAK,EAAC,sBADR;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,IAAI,EAAC,aAHP;AAIE,MAAA,QAAQ,EAAE,KAAKgC,YAJjB;AAKE,MAAA,YAAY,EAAE,KAAKhB,KAAL,CAAWhB,WAL3B;AAME,MAAA,WAAW,EAAC,EANd;AAOE,oBAAW,QAPb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,eAaE;AAAQ,MAAA,KAAK,EAAC,mCAAd;AAAkD,MAAA,IAAI,EAAC,QAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbF,CAHF,EAqBG,KAAKK,KAAL,CAAWkC,MAAX,CAAkB,gBAAlB,kBACC,oBAAC,IAAD;AACE,MAAA,EAAE,EAAG,GAAEhC,OAAO,CAACC,GAAR,CAAYgC,UAAW,gBADhC;AAEE,MAAA,SAAS,EAAC,yBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAtBJ,EA8BG,KAAKnC,KAAL,CAAWkC,MAAX,CAAkB,gBAAlB,kBACC;AACA,MAAA,OAAO,EAAE,KAAKZ,cADd;AAEA,MAAA,SAAS,EAAC,sCAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIG,KAAKX,KAAL,CAAWd,MAJd,CA/BJ,EAyCG,KAAKc,KAAL,CAAWL,YAAX,iBACC;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,eAGE;AAAK,MAAA,SAAS,EAAC,yDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,eAIE;AAAK,MAAA,SAAS,EAAC,mDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAJF,eAKE;AAAK,MAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBALF,eAME;AAAK,MAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBANF,eAQE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARF,CADF,EAWG,KAAKK,KAAL,CAAWL,YAAX,CAAwB8B,GAAxB,CAA6BC,IAAD,IAAU;AACrC,YAAM;AAAEnB,QAAAA;AAAF,UAAgBmB,IAAtB;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAA4B,QAAA,GAAG,EAAEnB,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA2BmB,IAAI,CAACrB,aAAhC,CADF,eAEE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA2BqB,IAAI,CAACC,eAAhC,CAFF,eAGE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmED,IAAI,CAACE,UAAxE,CAHF,eAIE;AAAK,QAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAkEF,IAAI,CAACG,aAAvE,CAJF,eAKE;AAAK,QAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAoEH,IAAI,CAACI,UAAzE,CALF,eAOE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEG,KAAKzC,KAAL,CAAWkC,MAAX,CAAkB,eAAlB,KAAsCG,IAAI,CAACK,MAA3C,iBACC,oBAAC,IAAD;AACE,QAAA,EAAE,EAAG,GAAExC,OAAO,CAACC,GAAR,CAAYgC,UAAW,sBAAqBE,IAAI,CAACnB,SAAU,EADpE;AAEE,QAAA,SAAS,EAAC,qBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHJ,EAWG,KAAKlB,KAAL,CAAWkC,MAAX,CAAkB,eAAlB,KAAuCG,IAAI,CAACK,MAA5C,iBACC,oBAAC,IAAD;AACE,QAAA,EAAE,EAAG,GAAExC,OAAO,CAACC,GAAR,CAAYgC,UAAW,oBAAmBE,IAAI,CAACnB,SAAU,EADlE;AAEE,QAAA,SAAS,EAAC,iBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAZJ,EAmBG,KAAKlB,KAAL,CAAWkC,MAAX,CAAkB,iBAAlB,KAAyCG,IAAI,CAACK,MAA9C,iBACC;AACE,QAAA,OAAO,EAAE,MAAM;AACb,cAAIC,MAAM,CAACC,OAAP,CAAe,6BAAf,CAAJ,EAAmD;AACjD,iBAAK3B,QAAL,CAAcoB,IAAI,CAACnB,SAAnB;AACD;AACF,SALH;AAME,QAAA,IAAI,EAAC,QANP;AAOE,QAAA,SAAS,EAAC,qBAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBApBJ,EAiCG,KAAKlB,KAAL,CAAWkC,MAAX,CAAkB,iBAAlB,KAAyC,CAACG,IAAI,CAACK,MAA/C,iBACC;AACE,QAAA,OAAO,EAAE,MAAM;AACb,cAAIC,MAAM,CAACC,OAAP,CAAe,6BAAf,CAAJ,EAAmD;AACjD,iBAAKlB,SAAL,CAAeW,IAAI,CAACnB,SAApB;AACD;AACF,SALH;AAME,QAAA,IAAI,EAAC,QANP;AAOE,QAAA,SAAS,EAAC,qBAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAlCJ,CAPF,CADF;AA4DD,KA9DA,CAXH,CA1CJ,CADF;AAyHD;;AA7M6B;;AAgNhC,eAAepB,OAAf","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport { fetchGet, fetchDelete } from \"../../../utils/Fetch\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nconst estadoInicial = { BuscarDatos: \"\", data: null,estado:\"Re Activar\" };\n\nclass Pilotos extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { data: estadoInicial };\n  }\n\n  Buscar = async () =>{\n    const data = await fetchGet(`${process.env.REACT_APP_SERVER}/api/piloto`);\n    this.setState({ dataFiltrada: data.data, data: data.data,estado:\"Re Activar\" });\n  }\n\n   componentDidMount() {\n   this.Buscar();\n  }\n  // cambioEstado = async (e) => {\n  //  const data = await fetchGet(`${process.env.REACT_APP_SERVER}/api/piloto`);\n  //   this.setState({ dataFiltrada: data.data, data: data.data });\n  //   const { name, value } = e.target;\n  //   this.setState({\n  //     [name]: value,\n  //   });\n  // };\n\n  BuscarDatos = (e) => {\n    e.preventDefault();\n    const patt = new RegExp(`${this.state.BuscarDatos}`, \"gi\");\n    const datos = this.state.data.filter((dat) => patt.exec(dat.NOMBRE_PILOTO));\n\n    this.setState({\n      dataFiltrada: datos,\n    });\n  };\n\n  Eliminar = async (ID_PILOTO) => {\n    const data = await fetchDelete(\n      `${process.env.REACT_APP_SERVER}/api/piloto/${ID_PILOTO}/${false}`\n    );\n    alert(data.message);\n    const dataGet = await fetchGet(\n      `${process.env.REACT_APP_SERVER}/api/piloto`\n    );\n    this.setState({ dataFiltrada: dataGet.data, data: dataGet.data });\n  };\n\n\n  ActivoReactivo =  (e) => {\n    e.preventDefault();\n    console.log(this.state.estado,\"Re Activar\")\n  if(this.state.estado===\"Re Activar\")\n{\nthis.Inactivos();\n}\nelse{\n  this.Buscar();\n}\n  };\n\n\n  Reactivar = async (ID_PILOTO) => {\n    const data = await fetchDelete(\n      `${process.env.REACT_APP_SERVER}/api/piloto/${ID_PILOTO}/${true}`\n    );\n    alert(data.message);\n   this.Inactivos();\n  };\n\n  Inactivos = async () => {\n  const data = await fetchGet(`${process.env.REACT_APP_SERVER}/api/piloto/inactivo`);\n  this.setState({ dataFiltrada: data.data, data: data.data,estado:\"Activos\"  });\n};\n\ncambioEstado = (e) => {\n  const { name, value } = e.target;\n  this.setState({\n    [name]: value,\n  });\n};\n  render() {\n    const redireccion = this.props.Access(\"VerAccesos\") ? (\n      \"\"\n    ) : (\n      <Redirect to=\"/\" />\n    );\n\n    return (\n      <Fragment>\n        {redireccion}\n        <h1 className=\"text-center mb-5\">Pilotos</h1>\n        <form class=\"form-inline \" onSubmit={this.BuscarDatos}>\n          <label className=\"ml-5 mr-5\">\n            <strong>Nombre/Clte:</strong>\n          </label>\n          <input\n            class=\"form-control mr-sm-5\"\n            type=\"search\"\n            name=\"BuscarDatos\"\n            onChange={this.cambioEstado}\n            defaultValue={this.state.BuscarDatos}\n            placeholder=\"\"\n            aria-label=\"Search\"\n          />\n          <button class=\"btn btn-outline-dark my-2 my-sm-0\" type=\"submit\">\n            Buscar\n          </button>\n        </form>\n\n        {this.props.Access(\"GuardarAccesos\") && (\n          <Link\n            to={`${process.env.PUBLIC_URL}/pilotos/crear`}\n            className=\"btn btn-link  ml-5 mr-5\"\n          >\n            Crear\n          </Link>\n        )}\n\n        {this.props.Access(\"GuardarAccesos\") && (\n          <button \n          onClick={this.ActivoReactivo}\n          className=\"btn btn-link  float-right  ml-5 mr-5\">\n           {\n             this.state.estado\n           } \n\n          </button>\n        )}\n\n        {this.state.dataFiltrada && (\n          <div className=\"ml-5 mr-5\">\n            <div className=\"row border\">\n            {/* d-sm-none d-md-none d-lg-block */}\n              <div className=\"col-md-2\">Pilotos</div>\n              <div className=\"col-md-2    d-none      d-sm-none d-md-block d-lg-blocK\">TELEFONO</div>\n              <div className=\"col-md-2 d-none   d-sm-none d-md-block d-lg-block\">DNI</div>\n              <div className=\"col-md-2 d-none  d-sm-none d-md-block d-lg-blocK\">TIPO LICENCIA</div>\n              <div className=\"col-md-2 d-none  d-sm-none d-md-block d-lg-blocK\" >EMPRESA</div>\n              {/* d-none  d-sm-none d-md-none d-lg-block */}\n              <div className=\"col-md-2\">Opciones</div>\n            </div>\n            {this.state.dataFiltrada.map((item) => {\n              const { ID_PILOTO } = item;\n              return (\n                <div className=\"row border\" key={ID_PILOTO}>\n                  <div className=\"col-md-2\">{item.NOMBRE_PILOTO}</div>\n                  <div className=\"col-md-2\">{item.TELEFONO_PILOTO}</div>\n                  <div className=\"col-md-2  d-none d-sm-none d-md-block d-lg-block\">{item.DNI_PILOTO}</div>\n                  <div className=\"col-md-2 d-none d-sm-none d-md-block d-lg-block\">{item.TIPO_LICENCIA}</div>\n                  <div className=\"col-md-2  d-none d-sm-none d-md-block d-lg-block\" >{item.ID_EMPRESA}</div>\n                  \n                  <div className=\"col-md-2\">\n                \n                    {this.props.Access(\"EditarAccesos\") && item.ESTADO && (\n                      <Link\n                        to={`${process.env.PUBLIC_URL}/pilotos/modificar/${item.ID_PILOTO}`}\n                        className=\"btn btn-warning m-1\"\n                      >\n                        Modificar\n                      </Link>\n                    )}\n\n                    {this.props.Access(\"EditarAccesos\")  && item.ESTADO&& (\n                      <Link\n                        to={`${process.env.PUBLIC_URL}/pilotos/detalle/${item.ID_PILOTO}`}\n                        className=\"btn btn-primary\"\n                      >\n                        Detalles\n                      </Link>\n                    )}\n                    {this.props.Access(\"EliminarAccesos\")  && item.ESTADO&& (\n                      <button\n                        onClick={() => {\n                          if (window.confirm(\"Seguro que deseas el piloto\")) {\n                            this.Eliminar(item.ID_PILOTO);\n                          }\n                        }}\n                        type=\"button\"\n                        className=\"btn btn-danger m-1 \"\n                      >\n                        &times; Eliminar\n                      </button>\n                    )}\n\n                    {this.props.Access(\"EliminarAccesos\")  && !item.ESTADO && (\n                      <button\n                        onClick={() => {\n                          if (window.confirm(\"Seguro que deseas el piloto\")) {\n                            this.Reactivar(item.ID_PILOTO);\n                          }\n                        }}\n                        type=\"button\"\n                        className=\"btn btn-danger m-1 \"\n                      >\n                        &times; Activar\n                      </button>\n                    )}\n\n                  </div>\n                  {/* </td> */}\n                  {/* </tr> */}\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default Pilotos;\n"]},"metadata":{},"sourceType":"module"}